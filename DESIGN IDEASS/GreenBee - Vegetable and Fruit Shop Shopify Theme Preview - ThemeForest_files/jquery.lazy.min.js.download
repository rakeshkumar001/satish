!function(P,d){"use strict";function o(p,y,z,t,e){function r(){var n,i,o,l;N=1<P.devicePixelRatio,z=a(z),0<=y.delay&&setTimeout(function(){u(!0)},y.delay),(y.delay<0||y.combined)&&(t.e=(n=y.throttle,i=function(t){"resize"===t.type&&(D=I=-1),u(t.all)},l=0,function(t,e){function r(){l=+new Date,i.call(p,t)}var a=new Date-l;o&&clearTimeout(o),n<a||!y.enableThrottle||e?r():o=setTimeout(r,n-a)}),t.a=function(t){t=a(t),z.push.apply(z,t)},t.g=function(){return z=Q(z).filter(function(){return!Q(this).data(y.loadedName)})},t.f=function(t){for(var e=0;e<t.length;e++){var r=z.filter(function(){return this===t[e]});r.length&&u(!1,r)}},u(),Q(y.appendScroll).on("scroll."+e+" resize."+e,t.e))}function a(t){for(var e=y.defaultImage,r=y.placeholder,a=y.imageBase,n=y.srcsetAttribute,i=y.loaderAttribute,o=y._f||{},l=0,u=(t=Q(t).filter(function(){var t=Q(this),e=w(this);return!t.data(y.handledName)&&(t.attr(y.attribute)||t.attr(n)||t.attr(i)||o[e]!==d)}).data("plugin_"+y.name,p)).length;l<u;l++){var f=Q(t[l]),c=w(t[l]),s=f.attr(y.imageBaseAttribute)||a;c===O&&s&&f.attr(n)&&f.attr(n,function(t,e){if(e){var r=t.split(",");t="";for(var a=0,n=r.length;a<n;a++)t+=e+r[a].trim()+(a!==n-1?",":"")}return t}(f.attr(n),s)),o[c]===d||f.attr(i)||f.attr(i,o[c]),c===O&&e&&!f.attr(R)?f.attr(R,e):c===O||!r||f.css(x)&&"none"!==f.css(x)||f.css(x,"url('"+r+"')")}return t}function u(t,e){if(!z.length)return y.autoDestroy&&p.destroy(),0;for(var r,a,n,i,o,l,u,f,c,s,d,A=e||z,g=!1,h=y.imageBase||"",m=y.srcsetAttribute,b=y.handledName,v=0;v<A.length;v++){(t||e||(l=A[v],c=void 0,u=l.getBoundingClientRect(),f=y.scrollDirection,c=y.threshold,s=(0<=I?I:I=Q(P).height())+c>u.top&&-c<u.bottom,d=(0<=D?D:D=Q(P).width())+c>u.left&&-c<u.right,"vertical"===f?s:("horizontal"===f||s)&&d))&&(r=Q(A[v]),a=w(A[v]),n=r.attr(y.attribute),i=r.attr(y.imageBaseAttribute)||h,o=r.attr(y.loaderAttribute),r.data(b)||y.visibleOnly&&!r.is(":visible")||!((n||r.attr(m))&&(a===O&&(i+n!==r.attr(R)||r.attr(m)!==r.attr(_))||a!==O&&i+n!==r.css(x))||o)||(g=!0,r.data(b,!0),function(e,t,r,a){++T;var n=function(){L("onError",e),B(),n=Q.noop};L("beforeLoad",e);var i=y.attribute,o=y.srcsetAttribute,l=y.sizesAttribute,u=y.retinaAttribute,f=y.removeAttribute,c=y.loadedName,s=e.attr(u);{var d,A,g;a?(d=function(){f&&e.removeAttr(y.loaderAttribute),e.data(c,!0),L(E,e),setTimeout(B,1),d=Q.noop},e.off(C).one(C,n).one(F,d),L(a,e,function(t){t?(e.off(F),d()):(e.off(C),n())})||e.trigger(C)):((A=Q(new Image)).one(C,n).one(F,function(){e.hide(),t===O?e.attr(S,A.attr(S)).attr(_,A.attr(_)).attr(R,A.attr(R)):e.css(x,"url('"+A.attr(R)+"')"),e[y.effect](y.effectTime),f&&(e.removeAttr(i+" "+o+" "+u+" "+y.imageBaseAttribute),l!==S&&e.removeAttr(l)),e.data(c,!0),L(E,e),A.remove(),B()}),g=(N&&s?s:e.attr(i))||"",A.attr(S,e.attr(l)).attr(_,e.attr(o)).attr(R,g?r+g:null),A.complete&&A.trigger(F))}}(r,a,i,o)))}g&&(z=Q(z).filter(function(){return!Q(this).data(b)}))}function w(t){return t.tagName.toLowerCase()}function B(){--T,z.length||T||L("onFinishedAll")}function L(t,e,r){return!!(t=y[t])&&(t.apply(p,[].slice.call(arguments,1)),!0)}var T=0,D=-1,I=-1,N=!1,E="afterLoad",F="load",C="error",O="img",R="src",_="srcset",S="sizes",x="background-image";"event"===y.bind||n?r():Q(P).on(F+"."+e,r)}function f(t,e){var r=this,a=Q.extend({},r.config,e),n={},i=a.name+"-"+ ++l;return r.config=function(t,e){return e===d?a[t]:(a[t]=e,r)},r.addItems=function(t){return n.a&&n.a("string"===Q.type(t)?Q(t):t),r},r.getItems=function(){return n.g?n.g():{}},r.update=function(t){return n.e&&n.e({},!t),r},r.force=function(t){return n.f&&n.f("string"===Q.type(t)?Q(t):t),r},r.loadAll=function(){return n.e&&n.e({all:!0},!0),r},r.destroy=function(){return Q(a.appendScroll).off("."+i,n.e),Q(P).off("."+i),n={},d},o(r,a,t,n,i),a.chainable?t:r}var Q=P.jQuery||P.Zepto,l=0,n=!1;Q.fn.Lazy=Q.fn.lazy=function(t){return new f(this,t)},Q.Lazy=Q.lazy=function(t,e,r){if(Q.isFunction(e)&&(r=e,e=[]),Q.isFunction(r)){t=Q.isArray(t)?t:[t],e=Q.isArray(e)?e:[e];for(var a=f.prototype.config,n=a._f||(a._f={}),i=0,o=t.length;i<o;i++)a[t[i]]!==d&&!Q.isFunction(a[t[i]])||(a[t[i]]=r);for(var l=0,u=e.length;l<u;l++)n[e[l]]=t[0]}},f.prototype.config={name:"lazy",chainable:!0,autoDestroy:!0,bind:"load",threshold:500,visibleOnly:!1,appendScroll:P,scrollDirection:"both",imageBase:null,defaultImage:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",placeholder:null,delay:-1,combined:!1,attribute:"data-src",srcsetAttribute:"data-srcset",sizesAttribute:"data-sizes",retinaAttribute:"data-retina",loaderAttribute:"data-loader",imageBaseAttribute:"data-imagebase",removeAttribute:!0,handledName:"handled",loadedName:"loaded",effect:"show",effectTime:0,enableThrottle:!0,throttle:250,beforeLoad:d,afterLoad:d,onError:d,onFinishedAll:d},Q(P).on("load",function(){n=!0})}(window);